<a class="homered" routerLink=""><i class="fa fa-home" aria-hidden="true"></i></a>

<section class="backtransacciones">
    <div class="bacttrans">
      <div class="search-container">
        <mat-form-field appearance="fill">
          <input class="search" matInput placeholder="BUSCAR" autocomplete="off" (keyup)="filterData($event)">
        </mat-form-field>

        <button type="button" class="btn_pp btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
          Realizar Transacción <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
        </button>

      </div>
      <!-- Button trigger modal -->
      <table mat-table [dataSource]="dataSource" id="tabla" class="mat-elevation-z8 table-responsive hover">
      
        <!-- Position Column -->
        <ng-container matColumnDef="id_transacction">
          <th id="thtable" mat-header-cell *matHeaderCellDef> ID </th>
          <td id="thtable" mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.id_transacction}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="email">
            <th id="thtable" mat-header-cell *matHeaderCellDef> Email </th>
            <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.email}} </td>
          </ng-container>

          <!-- Symbol Column -->
        <ng-container matColumnDef="nombre_completo">
            <th id="thtable" mat-header-cell *matHeaderCellDef> Nombre </th>
            <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.nombre_completo}} </td>
          </ng-container>
  
        <!-- Symbol Column -->
        <ng-container matColumnDef="tipo_transacction">
          <th id="thtable" mat-header-cell *matHeaderCellDef> Tipo transacción </th>
          <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.tipo_transacction}} </td>
        </ng-container>
  
        <!-- Symbol Column -->
        <ng-container matColumnDef="estado">
          <th id="thtable" mat-header-cell *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.estado}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="numero_cuenta">
            <th id="thtable" mat-header-cell *matHeaderCellDef> numero de cuenta </th>
            <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.numero_cuenta}} </td>
          </ng-container>

          <!-- Symbol Column -->
        <ng-container matColumnDef="saldo">
            <th id="thtable" mat-header-cell *matHeaderCellDef> Saldo </th>
            <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.saldo}} </td>
          </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="nombre_terminal">
          <th id="thtable" mat-header-cell *matHeaderCellDef> Nombre de terminal </th>
          <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.nombre_terminal}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="fecha_movimiento">
          <th id="thtable" mat-header-cell *matHeaderCellDef> fecha ultimo movimiento </th>
          <td mat-cell *matCellDef="let getTransacctiones"> {{getTransacctiones.fecha_movimiento}} </td>
        </ng-container>
  
        <!-- Symbol Column -->
        <ng-container matColumnDef="Accion">
          <th id="thtable" mat-header-cell *matHeaderCellDef>  </th>
          <td align="center"  mat-cell *matCellDef="let getTransacctiones"> 
            <a class="btn_table_action" (click)="deleteTransacctionesById(getTransacctiones.id_transacction)"><i class="fa fa-trash text-danger" aria-hidden="true"></i></a>
          </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator #paginator
                [pageSize]="5"
                [pageSizeOptions]="[5, 10, 25, 100]">
        </mat-paginator>
    </div> 
</section>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Transacciones</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form [formGroup]="singupForm" (submit)="singUp(singupForm.value)">
        <div align="center" class="modal-body">
            <input type="" formControlName="id_usuario">
            <label for="">Tipo de transacción</label>
            <select formControlName="id_tipo_transacction" required>
                <option *ngFor="let tipoTransacction of tipoTransacction"
                        value="{{tipoTransacction.id_tipo_transacction}}">
                        {{tipoTransacction.tipo_transacction}}
                </option>
              </select>
              <label for="">Cuenta</label>
              <select formControlName="id_cuenta" required>
                  <option *ngFor="let cuentaAhorro of cuentaAhorro"
                          value="{{cuentaAhorro.id_cuenta}}">
                          {{cuentaAhorro.numero_cuenta}}
                  </option>
                </select>
                <label for="">Terminal</label>
              <select formControlName="id_terminal" required>
                  <option *ngFor="let terminal of terminal"
                          value="{{terminal.id_terminal}}">
                          {{terminal.nombre_terminal}}
                  </option>
                </select>
            <label for="">Saldo a proceder</label>
            <input type="text" formControlName="saldo" autocomplete="off" required>
        </div>
        <div class="modal-footer">
          <button type="submit" [disabled]="singupForm.invalid" class="btn_sc btn-primary">Guardar</button>
        </div>
    </form>
    </div>
  </div>
</div>